(() => {
var exports = {};
exports.id = 2331;
exports.ids = [2331];
exports.modules = {

/***/ 18038:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react");

/***/ }),

/***/ 98704:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom/server-rendering-stub");

/***/ }),

/***/ 97897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack/client");

/***/ }),

/***/ 56786:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react/jsx-runtime");

/***/ }),

/***/ 5868:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/app-render");

/***/ }),

/***/ 41844:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/get-segment-param");

/***/ }),

/***/ 96624:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/helpers/interception-routes");

/***/ }),

/***/ 75281:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/route-modules/route-module");

/***/ }),

/***/ 57085:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context");

/***/ }),

/***/ 20199:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hash");

/***/ }),

/***/ 39569:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context");

/***/ }),

/***/ 17160:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router-context");

/***/ }),

/***/ 30893:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix");

/***/ }),

/***/ 12336:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/format-url");

/***/ }),

/***/ 17887:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll");

/***/ }),

/***/ 98735:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ 60120:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-local-url");

/***/ }),

/***/ 68231:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path");

/***/ }),

/***/ 53750:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash");

/***/ }),

/***/ 70982:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/resolve-href");

/***/ }),

/***/ 79618:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html");

/***/ }),

/***/ 78423:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils");

/***/ }),

/***/ 39491:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 82361:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 57147:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 13685:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 95687:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 22037:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 71017:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 12781:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 76224:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 57310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 73837:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 59796:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 496:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport safe */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__.GlobalError),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   originalPathname: () => (/* binding */ originalPathname),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7262);
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31823);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12502);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__) if(["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);

    

    const tree = {
        children: [
        '',
        {
        children: [
        'dashboard',
        {
        children: [
        'chat',
        {
        children: ['__PAGE__', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 11235)), "/Users/xperia/Workspace/budgeting_fe-main/src/app/dashboard/chat/page.tsx"],
          
        }]
      },
        {
          
          
        }
      ]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 23909)), "/Users/xperia/Workspace/budgeting_fe-main/src/app/dashboard/layout.tsx"],
'loading': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 51404)), "/Users/xperia/Workspace/budgeting_fe-main/src/app/dashboard/loading.tsx"],
          
        }
      ]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 30838)), "/Users/xperia/Workspace/budgeting_fe-main/src/app/layout.tsx"],
'loading': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 88924)), "/Users/xperia/Workspace/budgeting_fe-main/src/app/loading.tsx"],
'not-found': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 18275)), "/Users/xperia/Workspace/budgeting_fe-main/src/app/not-found.tsx"],
          
        }
      ]
      }.children;
    const pages = ["/Users/xperia/Workspace/budgeting_fe-main/src/app/dashboard/chat/page.tsx"];

    

    const originalPathname = "/dashboard/chat/page"
    const __next_app__ = {
      require: __webpack_require__,
      // all modules are in the entry chunk, so we never actually need to load chunks in webpack
      loadChunk: () => Promise.resolve()
    }

    

    // Create and export the route module that will be consumed.
    const options = {"definition":{"kind":"APP_PAGE","page":"/dashboard/chat/page","pathname":"/dashboard/chat","bundlePath":"app/dashboard/chat/page","filename":"","appPaths":[]}}
    const routeModule = new (next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default())({
      ...options,
      userland: {
        loaderTree: tree,
      },
    })
  

/***/ }),

/***/ 73203:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 4866))

/***/ }),

/***/ 4866:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ ChatView)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(56786);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(18038);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Card/index.js
var Card = __webpack_require__(76267);
var Card_default = /*#__PURE__*/__webpack_require__.n(Card);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Stack/index.js
var Stack = __webpack_require__(16854);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Container/index.js
var Container = __webpack_require__(39966);
var Container_default = /*#__PURE__*/__webpack_require__.n(Container);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Typography/index.js
var Typography = __webpack_require__(33987);
var Typography_default = /*#__PURE__*/__webpack_require__.n(Typography);
// EXTERNAL MODULE: ./src/routes/paths.ts
var paths = __webpack_require__(48611);
// EXTERNAL MODULE: ./src/routes/hooks/index.ts + 4 modules
var hooks = __webpack_require__(89539);
// EXTERNAL MODULE: ./src/hooks/use-mocked-user.ts
var use_mocked_user = __webpack_require__(63820);
// EXTERNAL MODULE: ./node_modules/lodash/keyBy.js
var keyBy = __webpack_require__(68731);
var keyBy_default = /*#__PURE__*/__webpack_require__.n(keyBy);
// EXTERNAL MODULE: ./node_modules/swr/core/dist/index.mjs + 1 modules
var dist = __webpack_require__(97146);
// EXTERNAL MODULE: ./src/utils/axios.ts
var axios = __webpack_require__(72810);
;// CONCATENATED MODULE: ./src/api/chat.ts



// utils

// ----------------------------------------------------------------------
const options = {
    revalidateIfStale: false,
    revalidateOnFocus: false,
    revalidateOnReconnect: false
};
function useGetContacts() {
    const URL = [
        axios/* endpoints */.Hv.chat,
        {
            params: {
                endpoint: "contacts"
            }
        }
    ];
    const { data, isLoading, error, isValidating } = (0,dist/* default */.ZP)(URL, axios/* fetcher */._i, options);
    const memoizedValue = (0,react_.useMemo)(()=>({
            contacts: (data?.contacts) || [],
            contactsLoading: isLoading,
            contactsError: error,
            contactsValidating: isValidating,
            contactsEmpty: !isLoading && !data?.contacts.length
        }), [
        data?.contacts,
        error,
        isLoading,
        isValidating
    ]);
    return memoizedValue;
}
// ----------------------------------------------------------------------
function useGetConversations() {
    const URL = [
        axios/* endpoints */.Hv.chat,
        {
            params: {
                endpoint: "conversations"
            }
        }
    ];
    const { data, isLoading, error, isValidating } = (0,dist/* default */.ZP)(URL, axios/* fetcher */._i, options);
    const memoizedValue = (0,react_.useMemo)(()=>{
        const byId = keyBy_default()(data?.conversations, "id") || {};
        const allIds = Object.keys(byId) || [];
        return {
            conversations: {
                byId,
                allIds
            },
            conversationsLoading: isLoading,
            conversationsError: error,
            conversationsValidating: isValidating,
            conversationsEmpty: !isLoading && !allIds.length
        };
    }, [
        data?.conversations,
        error,
        isLoading,
        isValidating
    ]);
    return memoizedValue;
}
// ----------------------------------------------------------------------
function useGetConversation(conversationId) {
    const URL = conversationId ? [
        axios/* endpoints */.Hv.chat,
        {
            params: {
                conversationId,
                endpoint: "conversation"
            }
        }
    ] : null;
    const { data, isLoading, error, isValidating } = (0,dist/* default */.ZP)(URL, axios/* fetcher */._i, options);
    const memoizedValue = (0,react_.useMemo)(()=>({
            conversation: data?.conversation,
            conversationLoading: isLoading,
            conversationError: error,
            conversationValidating: isValidating
        }), [
        data?.conversation,
        error,
        isLoading,
        isValidating
    ]);
    return memoizedValue;
}
// ----------------------------------------------------------------------
async function sendMessage(conversationId, messageData) {
    const CONVERSATIONS_URL = [
        axios/* endpoints */.Hv.chat,
        {
            params: {
                endpoint: "conversations"
            }
        }
    ];
    const CONVERSATION_URL = [
        axios/* endpoints */.Hv.chat,
        {
            params: {
                conversationId,
                endpoint: "conversation"
            }
        }
    ];
    /**
   * Work on server
   */ // const data = { conversationId, messageData };
    // await axios.put(endpoints.chat, data);
    /**
   * Work in local
   */ (0,dist/* mutate */.JG)(CONVERSATION_URL, (currentData)=>{
        const { conversation: currentConversation } = currentData;
        const conversation = {
            ...currentConversation,
            messages: [
                ...currentConversation.messages,
                messageData
            ]
        };
        return {
            conversation
        };
    }, false);
    /**
   * Work in local
   */ (0,dist/* mutate */.JG)(CONVERSATIONS_URL, (currentData)=>{
        const { conversations: currentConversations } = currentData;
        const conversations = currentConversations.map((conversation)=>conversation.id === conversationId ? {
                ...conversation,
                messages: [
                    ...conversation.messages,
                    messageData
                ]
            } : conversation);
        return {
            conversations
        };
    }, false);
}
// ----------------------------------------------------------------------
async function createConversation(conversationData) {
    const URL = [
        axios/* endpoints */.Hv.chat,
        {
            params: {
                endpoint: "conversations"
            }
        }
    ];
    /**
   * Work on server
   */ const data = {
        conversationData
    };
    const res = await axios/* default */.ZP.post(axios/* endpoints */.Hv.chat, data);
    /**
   * Work in local
   */ (0,dist/* mutate */.JG)(URL, (currentData)=>{
        const conversations = [
            ...currentData.conversations,
            conversationData
        ];
        return {
            ...currentData,
            conversations
        };
    }, false);
    return res.data;
}
// ----------------------------------------------------------------------
async function clickConversation(conversationId) {
    const URL = axios/* endpoints */.Hv.chat;
    /**
   * Work on server
   */ // await axios.get(URL, { params: { conversationId, endpoint: 'mark-as-seen' } });
    /**
   * Work in local
   */ (0,dist/* mutate */.JG)([
        URL,
        {
            params: {
                endpoint: "conversations"
            }
        }
    ], (currentData)=>{
        const conversations = currentData.conversations.map((conversation)=>conversation.id === conversationId ? {
                ...conversation,
                unreadCount: 0
            } : conversation);
        return {
            ...currentData,
            conversations
        };
    }, false);
}

// EXTERNAL MODULE: ./src/components/settings/index.ts + 1 modules
var components_settings = __webpack_require__(2701);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/styles/index.js
var styles = __webpack_require__(83476);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Box/index.js
var Box = __webpack_require__(43872);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Drawer/index.js
var Drawer = __webpack_require__(20094);
var Drawer_default = /*#__PURE__*/__webpack_require__.n(Drawer);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/IconButton/index.js
var IconButton = __webpack_require__(48060);
var IconButton_default = /*#__PURE__*/__webpack_require__.n(IconButton);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/TextField/index.js
var TextField = __webpack_require__(92870);
var TextField_default = /*#__PURE__*/__webpack_require__.n(TextField);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/InputAdornment/index.js
var InputAdornment = __webpack_require__(3683);
var InputAdornment_default = /*#__PURE__*/__webpack_require__.n(InputAdornment);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/ClickAwayListener/index.js
var ClickAwayListener = __webpack_require__(38889);
var ClickAwayListener_default = /*#__PURE__*/__webpack_require__.n(ClickAwayListener);
// EXTERNAL MODULE: ./src/hooks/use-responsive.ts
var use_responsive = __webpack_require__(59099);
// EXTERNAL MODULE: ./src/components/iconify/index.ts + 1 modules
var iconify = __webpack_require__(76505);
// EXTERNAL MODULE: ./src/components/scrollbar/index.ts + 2 modules
var scrollbar = __webpack_require__(65026);
;// CONCATENATED MODULE: ./src/sections/chat/hooks/use-get-message.ts
// types
function useGetMessage({ message, participants, currentUserId }) {
    const sender = participants.find((participant)=>participant.id === message.senderId);
    const senderDetails = message.senderId === currentUserId ? {
        type: "me"
    } : {
        avatarUrl: sender?.avatarUrl,
        firstName: sender?.name.split(" ")[0]
    };
    const me = senderDetails.type === "me";
    const hasImage = message.contentType === "image";
    return {
        hasImage,
        me,
        senderDetails
    };
}

;// CONCATENATED MODULE: ./src/sections/chat/hooks/use-get-nav-item.ts
// types
function useGetNavItem({ currentUserId, conversation }) {
    const { messages, participants } = conversation;
    const participantsInConversation = participants.filter((participant)=>participant.id !== currentUserId);
    const lastMessage = messages[messages.length - 1];
    const group = participantsInConversation.length > 1;
    const displayName = participantsInConversation.map((participant)=>participant.name).join(", ");
    const hasOnlineInGroup = group ? participantsInConversation.map((item)=>item.status).includes("online") : false;
    let displayText = "";
    if (lastMessage) {
        const sender = lastMessage.senderId === currentUserId ? "You: " : "";
        const message = lastMessage.contentType === "image" ? "Sent a photo" : lastMessage.body;
        displayText = `${sender}${message}`;
    }
    return {
        group,
        displayName,
        displayText,
        participants: participantsInConversation,
        lastActivity: lastMessage.createdAt,
        hasOnlineInGroup
    };
}

;// CONCATENATED MODULE: ./src/sections/chat/hooks/use-collapse-nav.ts

// ----------------------------------------------------------------------
function useCollapseNav() {
    const [openMobile, setOpenMobile] = (0,react_.useState)(false);
    const [collapseDesktop, setCollapseDesktop] = (0,react_.useState)(false);
    const onCollapseDesktop = (0,react_.useCallback)(()=>{
        setCollapseDesktop((prev)=>!prev);
    }, []);
    const onCloseDesktop = (0,react_.useCallback)(()=>{
        setCollapseDesktop(false);
    }, []);
    const onOpenMobile = (0,react_.useCallback)(()=>{
        setOpenMobile(true);
    }, []);
    const onCloseMobile = (0,react_.useCallback)(()=>{
        setOpenMobile(false);
    }, []);
    return {
        openMobile,
        collapseDesktop,
        //
        onOpenMobile,
        onCloseMobile,
        onCloseDesktop,
        onCollapseDesktop
    };
}

;// CONCATENATED MODULE: ./src/sections/chat/hooks/use-messages-scroll.ts

// ----------------------------------------------------------------------
function useMessagesScroll(messages) {
    const messagesEndRef = (0,react_.useRef)(null);
    const scrollMessagesToBottom = (0,react_.useCallback)(()=>{
        if (!messages) {
            return;
        }
        if (!messagesEndRef.current) {
            return;
        }
        if (messagesEndRef.current) {
            messagesEndRef.current.scrollTop = messagesEndRef.current.scrollHeight;
        }
    }, [
        messages
    ]);
    (0,react_.useEffect)(()=>{
        scrollMessagesToBottom();
    }, // eslint-disable-next-line react-hooks/exhaustive-deps
    [
        messages
    ]);
    return {
        messagesEndRef
    };
}

;// CONCATENATED MODULE: ./src/sections/chat/hooks/index.ts





// EXTERNAL MODULE: ./node_modules/date-fns/esm/formatDistanceToNowStrict/index.js + 1 modules
var formatDistanceToNowStrict = __webpack_require__(83874);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Badge/index.js
var Badge = __webpack_require__(42454);
var Badge_default = /*#__PURE__*/__webpack_require__.n(Badge);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Avatar/index.js
var Avatar = __webpack_require__(95843);
var Avatar_default = /*#__PURE__*/__webpack_require__.n(Avatar);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/AvatarGroup/index.js
var AvatarGroup = __webpack_require__(71394);
var AvatarGroup_default = /*#__PURE__*/__webpack_require__.n(AvatarGroup);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/ListItemText/index.js
var ListItemText = __webpack_require__(93429);
var ListItemText_default = /*#__PURE__*/__webpack_require__.n(ListItemText);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/ListItemButton/index.js
var ListItemButton = __webpack_require__(19868);
var ListItemButton_default = /*#__PURE__*/__webpack_require__.n(ListItemButton);
;// CONCATENATED MODULE: ./src/sections/chat/chat-nav-item.tsx



// @mui








// routes


// hooks


// api

//

function ChatNavItem({ selected, collapse, conversation, onCloseMobile }) {
    const { user } = (0,use_mocked_user/* useMockedUser */.I)();
    const mdUp = (0,use_responsive/* useResponsive */.F)("up", "md");
    const router = (0,hooks/* useRouter */.tv)();
    const { group, displayName, displayText, participants, lastActivity, hasOnlineInGroup } = useGetNavItem({
        conversation,
        currentUserId: user.id
    });
    const singleParticipant = participants[0];
    const { name, avatarUrl, status } = singleParticipant;
    const handleClickConversation = (0,react_.useCallback)(async ()=>{
        try {
            if (!mdUp) {
                onCloseMobile();
            }
            await clickConversation(conversation.id);
            router.push(`${paths/* paths */.H.dashboard.chat}?id=${conversation.id}`);
        } catch (error) {
            console.error(error);
        }
    }, [
        conversation.id,
        mdUp,
        onCloseMobile,
        router
    ]);
    const renderGroup = /*#__PURE__*/ jsx_runtime_.jsx((Badge_default()), {
        variant: hasOnlineInGroup ? "online" : "invisible",
        anchorOrigin: {
            vertical: "bottom",
            horizontal: "right"
        },
        children: /*#__PURE__*/ jsx_runtime_.jsx((AvatarGroup_default()), {
            variant: "compact",
            sx: {
                width: 48,
                height: 48
            },
            children: participants.slice(0, 2).map((participant)=>/*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                    alt: participant.name,
                    src: participant.avatarUrl
                }, participant.id))
        })
    });
    const renderSingle = /*#__PURE__*/ jsx_runtime_.jsx((Badge_default()), {
        variant: status,
        anchorOrigin: {
            vertical: "bottom",
            horizontal: "right"
        },
        children: /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
            alt: name,
            src: avatarUrl,
            sx: {
                width: 48,
                height: 48
            }
        })
    }, status);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)((ListItemButton_default()), {
        disableGutters: true,
        onClick: handleClickConversation,
        sx: {
            py: 1.5,
            px: 2.5,
            ...selected && {
                bgcolor: "action.selected"
            }
        },
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((Badge_default()), {
                color: "error",
                overlap: "circular",
                badgeContent: collapse ? conversation.unreadCount : 0,
                children: group ? renderGroup : renderSingle
            }),
            !collapse && /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx((ListItemText_default()), {
                        sx: {
                            ml: 2
                        },
                        primary: displayName,
                        primaryTypographyProps: {
                            noWrap: true,
                            variant: "subtitle2"
                        },
                        secondary: displayText,
                        secondaryTypographyProps: {
                            noWrap: true,
                            component: "span",
                            variant: conversation.unreadCount ? "subtitle2" : "body2",
                            color: conversation.unreadCount ? "text.primary" : "text.secondary"
                        }
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                        alignItems: "flex-end",
                        sx: {
                            ml: 2,
                            height: 44
                        },
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                                noWrap: true,
                                variant: "body2",
                                component: "span",
                                sx: {
                                    mb: 1.5,
                                    fontSize: 12,
                                    color: "text.disabled"
                                },
                                children: (0,formatDistanceToNowStrict/* default */.Z)(new Date(lastActivity), {
                                    addSuffix: false
                                })
                            }),
                            !!conversation.unreadCount && /*#__PURE__*/ jsx_runtime_.jsx(Box["default"], {
                                sx: {
                                    width: 8,
                                    height: 8,
                                    bgcolor: "info.main",
                                    borderRadius: "50%"
                                }
                            })
                        ]
                    })
                ]
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/@mui/material/node/Divider/index.js
var Divider = __webpack_require__(61272);
var Divider_default = /*#__PURE__*/__webpack_require__.n(Divider);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Tooltip/index.js
var Tooltip = __webpack_require__(11666);
var Tooltip_default = /*#__PURE__*/__webpack_require__.n(Tooltip);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/MenuItem/index.js
var MenuItem = __webpack_require__(88707);
var MenuItem_default = /*#__PURE__*/__webpack_require__.n(MenuItem);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/InputBase/index.js
var InputBase = __webpack_require__(73392);
var InputBase_default = /*#__PURE__*/__webpack_require__.n(InputBase);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Select/index.js
var Select = __webpack_require__(51892);
var Select_default = /*#__PURE__*/__webpack_require__.n(Select);
// EXTERNAL MODULE: ./src/components/custom-popover/index.ts + 4 modules
var custom_popover = __webpack_require__(99310);
;// CONCATENATED MODULE: ./src/sections/chat/chat-nav-account.tsx


// @mui










// hooks

// components


// ----------------------------------------------------------------------
function ChatNavAccount() {
    const { user } = (0,use_mocked_user/* useMockedUser */.I)();
    const popover = (0,custom_popover/* usePopover */.S)();
    const [status, setStatus] = (0,react_.useState)("online");
    const handleChangeStatus = (0,react_.useCallback)((event)=>{
        setStatus(event.target.value);
    }, []);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((Badge_default()), {
                variant: status,
                anchorOrigin: {
                    vertical: "bottom",
                    horizontal: "right"
                },
                children: /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                    src: user?.photoURL,
                    alt: user?.displayName,
                    onClick: popover.onOpen,
                    sx: {
                        cursor: "pointer",
                        width: 48,
                        height: 48
                    }
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(custom_popover/* default */.Z, {
                open: popover.open,
                onClose: popover.onClose,
                arrow: "top-left",
                sx: {
                    p: 0
                },
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                        direction: "row",
                        alignItems: "center",
                        spacing: 2,
                        sx: {
                            py: 2,
                            pr: 1,
                            pl: 2.5
                        },
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx((ListItemText_default()), {
                                primary: user?.displayName,
                                secondary: user?.email,
                                secondaryTypographyProps: {
                                    component: "span"
                                }
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx((Tooltip_default()), {
                                title: "Log out",
                                children: /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                                    color: "error",
                                    children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                        icon: "ic:round-power-settings-new"
                                    })
                                })
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((Divider_default()), {
                        sx: {
                            borderStyle: "dashed"
                        }
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                        sx: {
                            p: 1
                        },
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)((MenuItem_default()), {
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx((Badge_default()), {
                                        variant: status,
                                        sx: {
                                            [`& .${Badge.badgeClasses.badge}`]: {
                                                position: "static",
                                                m: 0.75,
                                                width: 12,
                                                height: 12,
                                                flexShrink: 0
                                            }
                                        }
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx((Select_default()), {
                                        native: true,
                                        fullWidth: true,
                                        value: status,
                                        onChange: handleChangeStatus,
                                        input: /*#__PURE__*/ jsx_runtime_.jsx((InputBase_default()), {
                                            sx: {
                                                pl: 2
                                            }
                                        }),
                                        inputProps: {
                                            sx: {
                                                textTransform: "capitalize"
                                            }
                                        },
                                        children: [
                                            "online",
                                            "alway",
                                            "busy",
                                            "offline"
                                        ].map((option)=>/*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                value: option,
                                                children: option
                                            }, option))
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)((MenuItem_default()), {
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                        icon: "solar:user-id-bold",
                                        width: 24
                                    }),
                                    "Profile"
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)((MenuItem_default()), {
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                        icon: "eva:settings-2-fill",
                                        width: 24
                                    }),
                                    "Settings"
                                ]
                            })
                        ]
                    })
                ]
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/@mui/material/node/Skeleton/index.js
var Skeleton = __webpack_require__(10413);
var Skeleton_default = /*#__PURE__*/__webpack_require__.n(Skeleton);
;// CONCATENATED MODULE: ./src/sections/chat/chat-skeleton.tsx
// @mui



// ----------------------------------------------------------------------
function ChatNavItemSkeleton({ sx, ...other }) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
        spacing: 2,
        direction: "row",
        alignItems: "center",
        sx: {
            px: 2.5,
            py: 1.5,
            ...sx
        },
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((Skeleton_default()), {
                variant: "circular",
                sx: {
                    width: 48,
                    height: 48
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                spacing: 1,
                flexGrow: 1,
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx((Skeleton_default()), {
                        sx: {
                            width: 0.75,
                            height: 10
                        }
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((Skeleton_default()), {
                        sx: {
                            width: 0.5,
                            height: 10
                        }
                    })
                ]
            })
        ]
    });
}

// EXTERNAL MODULE: ./src/components/search-not-found/index.ts + 1 modules
var search_not_found = __webpack_require__(271);
;// CONCATENATED MODULE: ./src/sections/chat/chat-nav-search-results.tsx
// @mui




//

function ChatNavSearchResults({ query, results, onClickResult }) {
    const totalResults = results.length;
    const notFound = !totalResults && !!query;
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)((Typography_default()), {
                variant: "h6",
                sx: {
                    px: 2.5,
                    mb: 2
                },
                children: [
                    "Contacts (",
                    totalResults,
                    ")"
                ]
            }),
            notFound ? /*#__PURE__*/ jsx_runtime_.jsx(search_not_found/* default */.Z, {
                query: query,
                sx: {
                    p: 3,
                    mx: "auto",
                    width: `calc(100% - 40px)`,
                    bgcolor: "background.neutral"
                }
            }) : /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {
                children: results.map((result)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)((ListItemButton_default()), {
                        onClick: ()=>onClickResult(result),
                        sx: {
                            px: 2.5,
                            py: 1.5,
                            typography: "subtitle2"
                        },
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                                alt: result.name,
                                src: result.avatarUrl,
                                sx: {
                                    mr: 2
                                }
                            }),
                            result.name
                        ]
                    }, result.id))
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/sections/chat/chat-nav.tsx


// @mui








// hooks

// routes


// components


//





// ----------------------------------------------------------------------
const NAV_WIDTH = 320;
const NAV_COLLAPSE_WIDTH = 96;
function ChatNav({ loading, contacts, conversations, selectedConversationId }) {
    const theme = (0,styles.useTheme)();
    const router = (0,hooks/* useRouter */.tv)();
    const mdUp = (0,use_responsive/* useResponsive */.F)("up", "md");
    const { collapseDesktop, onCloseDesktop, onCollapseDesktop, //
    openMobile, onOpenMobile, onCloseMobile } = useCollapseNav();
    const [searchContacts, setSearchContacts] = (0,react_.useState)({
        query: "",
        results: []
    });
    (0,react_.useEffect)(()=>{
        if (!mdUp) {
            onCloseDesktop();
        }
    }, [
        onCloseDesktop,
        mdUp
    ]);
    const handleToggleNav = (0,react_.useCallback)(()=>{
        if (mdUp) {
            onCollapseDesktop();
        } else {
            onCloseMobile();
        }
    }, [
        mdUp,
        onCloseMobile,
        onCollapseDesktop
    ]);
    const handleClickCompose = (0,react_.useCallback)(()=>{
        if (!mdUp) {
            onCloseMobile();
        }
        router.push(paths/* paths */.H.dashboard.chat);
    }, [
        mdUp,
        onCloseMobile,
        router
    ]);
    const handleSearchContacts = (0,react_.useCallback)((inputValue)=>{
        setSearchContacts((prevState)=>({
                ...prevState,
                query: inputValue
            }));
        if (inputValue) {
            const results = contacts.filter((contact)=>contact.name.toLowerCase().includes(inputValue));
            setSearchContacts((prevState)=>({
                    ...prevState,
                    results
                }));
        }
    }, [
        contacts
    ]);
    const handleClickAwaySearch = (0,react_.useCallback)(()=>{
        setSearchContacts({
            query: "",
            results: []
        });
    }, []);
    const handleClickResult = (0,react_.useCallback)((result)=>{
        handleClickAwaySearch();
        router.push(`${paths/* paths */.H.dashboard.chat}?id=${result.id}`);
    }, [
        handleClickAwaySearch,
        router
    ]);
    const renderToggleBtn = /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
        onClick: onOpenMobile,
        sx: {
            left: 0,
            top: 84,
            zIndex: 9,
            width: 32,
            height: 32,
            position: "absolute",
            borderRadius: `0 12px 12px 0`,
            bgcolor: theme.palette.primary.main,
            boxShadow: theme.customShadows.primary,
            color: theme.palette.primary.contrastText,
            "&:hover": {
                bgcolor: theme.palette.primary.darker
            }
        },
        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
            width: 16,
            icon: "solar:users-group-rounded-bold"
        })
    });
    const renderSkeleton = /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {
        children: [
            ...Array(12)
        ].map((_, index)=>/*#__PURE__*/ jsx_runtime_.jsx(ChatNavItemSkeleton, {}, index))
    });
    const renderList = /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {
        children: conversations.allIds.map((conversationId)=>/*#__PURE__*/ jsx_runtime_.jsx(ChatNavItem, {
                collapse: collapseDesktop,
                conversation: conversations.byId[conversationId],
                selected: conversationId === selectedConversationId,
                onCloseMobile: onCloseMobile
            }, conversationId))
    });
    const renderListResults = /*#__PURE__*/ jsx_runtime_.jsx(ChatNavSearchResults, {
        query: searchContacts.query,
        results: searchContacts.results,
        onClickResult: handleClickResult
    });
    const renderSearchInput = /*#__PURE__*/ jsx_runtime_.jsx((ClickAwayListener_default()), {
        onClickAway: handleClickAwaySearch,
        children: /*#__PURE__*/ jsx_runtime_.jsx((TextField_default()), {
            fullWidth: true,
            value: searchContacts.query,
            onChange: (event)=>handleSearchContacts(event.target.value),
            placeholder: "Search contacts...",
            InputProps: {
                startAdornment: /*#__PURE__*/ jsx_runtime_.jsx((InputAdornment_default()), {
                    position: "start",
                    children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                        icon: "eva:search-fill",
                        sx: {
                            color: "text.disabled"
                        }
                    })
                })
            },
            sx: {
                mt: 2.5
            }
        })
    });
    const renderContent = /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                direction: "row",
                alignItems: "center",
                justifyContent: "center",
                sx: {
                    p: 2.5,
                    pb: 0
                },
                children: [
                    !collapseDesktop && /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx(ChatNavAccount, {}),
                            /*#__PURE__*/ jsx_runtime_.jsx(Box["default"], {
                                sx: {
                                    flexGrow: 1
                                }
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                        onClick: handleToggleNav,
                        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                            icon: collapseDesktop ? "eva:arrow-ios-forward-fill" : "eva:arrow-ios-back-fill"
                        })
                    }),
                    !collapseDesktop && /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                        onClick: handleClickCompose,
                        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                            width: 24,
                            icon: "solar:user-plus-bold"
                        })
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(Box["default"], {
                sx: {
                    p: 2.5,
                    pt: 0
                },
                children: !collapseDesktop && renderSearchInput
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(scrollbar/* default */.Z, {
                sx: {
                    pb: 1
                },
                children: [
                    searchContacts.query && renderListResults,
                    loading && renderSkeleton,
                    !searchContacts.query && !!conversations.allIds.length && renderList
                ]
            })
        ]
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            !mdUp && renderToggleBtn,
            mdUp ? /*#__PURE__*/ jsx_runtime_.jsx(Stack["default"], {
                sx: {
                    height: 1,
                    flexShrink: 0,
                    width: NAV_WIDTH,
                    borderRight: `solid 1px ${theme.palette.divider}`,
                    transition: theme.transitions.create([
                        "width"
                    ], {
                        duration: theme.transitions.duration.shorter
                    }),
                    ...collapseDesktop && {
                        width: NAV_COLLAPSE_WIDTH
                    }
                },
                children: renderContent
            }) : /*#__PURE__*/ jsx_runtime_.jsx((Drawer_default()), {
                open: openMobile,
                onClose: onCloseMobile,
                slotProps: {
                    backdrop: {
                        invisible: true
                    }
                },
                PaperProps: {
                    sx: {
                        width: NAV_WIDTH
                    }
                },
                children: renderContent
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/lodash/uniq.js
var uniq = __webpack_require__(78472);
var uniq_default = /*#__PURE__*/__webpack_require__.n(uniq);
// EXTERNAL MODULE: ./node_modules/lodash/flatten.js
var flatten = __webpack_require__(92598);
var flatten_default = /*#__PURE__*/__webpack_require__.n(flatten);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Collapse/index.js
var Collapse = __webpack_require__(31022);
var Collapse_default = /*#__PURE__*/__webpack_require__.n(Collapse);
// EXTERNAL MODULE: ./src/hooks/use-boolean.ts
var use_boolean = __webpack_require__(80935);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Dialog/index.js
var Dialog = __webpack_require__(62969);
var Dialog_default = /*#__PURE__*/__webpack_require__.n(Dialog);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/DialogContent/index.js
var DialogContent = __webpack_require__(16856);
var DialogContent_default = /*#__PURE__*/__webpack_require__.n(DialogContent);
;// CONCATENATED MODULE: ./src/sections/chat/chat-room-participant-dialog.tsx
// @mui








// components

function ChatRoomParticipantDialog({ participant, open, onClose }) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)((Dialog_default()), {
        fullWidth: true,
        maxWidth: "xs",
        open: open,
        onClose: onClose,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                onClick: onClose,
                sx: {
                    position: "absolute",
                    right: 8,
                    top: 8
                },
                children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                    icon: "mingcute:close-line"
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)((DialogContent_default()), {
                sx: {
                    py: 5,
                    px: 3,
                    display: "flex"
                },
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                        alt: participant.name,
                        src: participant.avatarUrl,
                        sx: {
                            width: 96,
                            height: 96,
                            mr: 3
                        }
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                        spacing: 1,
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                                variant: "caption",
                                sx: {
                                    color: "primary.main"
                                },
                                children: participant.role
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                                variant: "subtitle1",
                                children: participant.name
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                                direction: "row",
                                sx: {
                                    typography: "caption",
                                    color: "text.disabled"
                                },
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                        icon: "mingcute:location-fill",
                                        width: 16,
                                        sx: {
                                            flexShrink: 0,
                                            mr: 0.5,
                                            mt: "2px"
                                        }
                                    }),
                                    participant.address
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                                spacing: 1,
                                direction: "row",
                                sx: {
                                    pt: 1.5
                                },
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                                        size: "small",
                                        color: "error",
                                        sx: {
                                            borderRadius: 1,
                                            bgcolor: (theme)=>(0,styles.alpha)(theme.palette.error.main, 0.08),
                                            "&:hover": {
                                                bgcolor: (theme)=>(0,styles.alpha)(theme.palette.error.main, 0.16)
                                            }
                                        },
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                            width: 18,
                                            icon: "solar:phone-bold"
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                                        size: "small",
                                        color: "info",
                                        sx: {
                                            borderRadius: 1,
                                            bgcolor: (theme)=>(0,styles.alpha)(theme.palette.info.main, 0.08),
                                            "&:hover": {
                                                bgcolor: (theme)=>(0,styles.alpha)(theme.palette.info.main, 0.16)
                                            }
                                        },
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                            width: 18,
                                            icon: "solar:chat-round-dots-bold"
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                                        size: "small",
                                        color: "primary",
                                        sx: {
                                            borderRadius: 1,
                                            bgcolor: (theme)=>(0,styles.alpha)(theme.palette.primary.main, 0.08),
                                            "&:hover": {
                                                bgcolor: (theme)=>(0,styles.alpha)(theme.palette.primary.main, 0.16)
                                            }
                                        },
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                            width: 18,
                                            icon: "fluent:mail-24-filled"
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                                        size: "small",
                                        color: "secondary",
                                        sx: {
                                            borderRadius: 1,
                                            bgcolor: (theme)=>(0,styles.alpha)(theme.palette.secondary.main, 0.08),
                                            "&:hover": {
                                                bgcolor: (theme)=>(0,styles.alpha)(theme.palette.secondary.main, 0.16)
                                            }
                                        },
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                            width: 18,
                                            icon: "solar:videocamera-record-bold"
                                        })
                                    })
                                ]
                            })
                        ]
                    })
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/sections/chat/chat-room-group.tsx


// @mui






// hooks

// components


//

function ChatRoomGroup({ participants }) {
    const [selected, setSelected] = (0,react_.useState)(null);
    const collapse = (0,use_boolean/* useBoolean */.k)(true);
    const handleOpen = (0,react_.useCallback)((participant)=>{
        setSelected(participant);
    }, []);
    const handleClose = ()=>{
        setSelected(null);
    };
    const totalParticipants = participants.length;
    const renderBtn = /*#__PURE__*/ (0,jsx_runtime_.jsxs)((ListItemButton_default()), {
        onClick: collapse.onToggle,
        sx: {
            pl: 2.5,
            pr: 1.5,
            height: 40,
            flexShrink: 0,
            flexGrow: "unset",
            typography: "overline",
            color: "text.secondary",
            bgcolor: "background.neutral"
        },
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Box["default"], {
                component: "span",
                sx: {
                    flexGrow: 1
                },
                children: [
                    "In room (",
                    totalParticipants,
                    ")"
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                width: 16,
                icon: collapse.value ? "eva:arrow-ios-downward-fill" : "eva:arrow-ios-forward-fill"
            })
        ]
    });
    const renderContent = /*#__PURE__*/ jsx_runtime_.jsx(scrollbar/* default */.Z, {
        sx: {
            height: 56 * 4
        },
        children: participants.map((participant)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)((ListItemButton_default()), {
                onClick: ()=>handleOpen(participant),
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx((Badge_default()), {
                        variant: participant.status,
                        anchorOrigin: {
                            vertical: "bottom",
                            horizontal: "right"
                        },
                        children: /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                            alt: participant.name,
                            src: participant.avatarUrl
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((ListItemText_default()), {
                        sx: {
                            ml: 2
                        },
                        primary: participant.name,
                        secondary: participant.role,
                        primaryTypographyProps: {
                            noWrap: true,
                            typography: "subtitle2"
                        },
                        secondaryTypographyProps: {
                            noWrap: true,
                            component: "span",
                            typography: "caption"
                        }
                    })
                ]
            }, participant.id))
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            renderBtn,
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                children: /*#__PURE__*/ jsx_runtime_.jsx((Collapse_default()), {
                    in: collapse.value,
                    children: renderContent
                })
            }),
            selected && /*#__PURE__*/ jsx_runtime_.jsx(ChatRoomParticipantDialog, {
                participant: selected,
                open: !!selected,
                onClose: handleClose
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/sections/chat/chat-room-single.tsx
// @mui







// hooks

// components

function ChatRoomSingle({ participant }) {
    const collapse = (0,use_boolean/* useBoolean */.k)(true);
    const { name, avatarUrl, role, address, phoneNumber, email } = participant;
    const renderInfo = /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
        alignItems: "center",
        sx: {
            py: 5
        },
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                alt: name,
                src: avatarUrl,
                sx: {
                    width: 96,
                    height: 96,
                    mb: 2
                }
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                variant: "subtitle1",
                children: name
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                variant: "body2",
                sx: {
                    color: "text.secondary",
                    mt: 0.5
                },
                children: role
            })
        ]
    });
    const renderBtn = /*#__PURE__*/ (0,jsx_runtime_.jsxs)((ListItemButton_default()), {
        onClick: collapse.onToggle,
        sx: {
            pl: 2.5,
            pr: 1.5,
            height: 40,
            flexShrink: 0,
            flexGrow: "unset",
            typography: "overline",
            color: "text.secondary",
            bgcolor: "background.neutral"
        },
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(Box["default"], {
                component: "span",
                sx: {
                    flexGrow: 1
                },
                children: "Information"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                width: 16,
                icon: collapse.value ? "eva:arrow-ios-downward-fill" : "eva:arrow-ios-forward-fill"
            })
        ]
    });
    const renderContent = /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
        spacing: 2,
        sx: {
            px: 2,
            py: 2.5,
            "& svg": {
                mr: 1,
                flexShrink: 0,
                color: "text.disabled"
            }
        },
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                direction: "row",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                        icon: "mingcute:location-fill"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                        variant: "body2",
                        children: address
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                direction: "row",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                        icon: "solar:phone-bold"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                        variant: "body2",
                        children: phoneNumber
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                direction: "row",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                        icon: "fluent:mail-24-filled"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                        variant: "body2",
                        noWrap: true,
                        children: email
                    })
                ]
            })
        ]
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            renderInfo,
            renderBtn,
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                children: /*#__PURE__*/ jsx_runtime_.jsx((Collapse_default()), {
                    in: collapse.value,
                    children: renderContent
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ./src/utils/format-time.ts
var format_time = __webpack_require__(94871);
// EXTERNAL MODULE: ./src/components/file-thumbnail/index.ts + 3 modules
var file_thumbnail = __webpack_require__(66623);
;// CONCATENATED MODULE: ./src/sections/chat/chat-room-attachments.tsx
// @mui





// hooks

// utils

// components



function ChatRoomAttachments({ attachments }) {
    const collapse = (0,use_boolean/* useBoolean */.k)(true);
    const totalAttachments = attachments.length;
    const renderBtn = /*#__PURE__*/ (0,jsx_runtime_.jsxs)((ListItemButton_default()), {
        disabled: !attachments.length,
        onClick: collapse.onToggle,
        sx: {
            pl: 2.5,
            pr: 1.5,
            height: 40,
            flexShrink: 0,
            flexGrow: "unset",
            typography: "overline",
            color: "text.secondary",
            bgcolor: "background.neutral"
        },
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Box["default"], {
                component: "span",
                sx: {
                    flexGrow: 1
                },
                children: [
                    "Attachments (",
                    totalAttachments,
                    ")"
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                width: 16,
                icon: !collapse.value && "eva:arrow-ios-forward-fill" || !attachments.length && "eva:arrow-ios-forward-fill" || "eva:arrow-ios-downward-fill"
            })
        ]
    });
    const renderContent = /*#__PURE__*/ jsx_runtime_.jsx(scrollbar/* default */.Z, {
        sx: {
            px: 2,
            py: 2.5
        },
        children: attachments.map((attachment, index)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                spacing: 1.5,
                direction: "row",
                alignItems: "center",
                sx: {
                    mb: 2
                },
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(Stack["default"], {
                        alignItems: "center",
                        justifyContent: "center",
                        sx: {
                            width: 40,
                            height: 40,
                            flexShrink: 0,
                            borderRadius: 1,
                            overflow: "hidden",
                            position: "relative",
                            backgroundColor: "background.neutral"
                        },
                        children: /*#__PURE__*/ jsx_runtime_.jsx(file_thumbnail/* default */.ZP, {
                            imageView: true,
                            file: attachment.preview,
                            onDownload: ()=>console.info("DOWNLOAD"),
                            sx: {
                                width: 28,
                                height: 28
                            }
                        })
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx((ListItemText_default()), {
                        primary: attachment.name,
                        secondary: (0,format_time/* fDateTime */.zM)(attachment.createdAt),
                        primaryTypographyProps: {
                            noWrap: true,
                            typography: "body2"
                        },
                        secondaryTypographyProps: {
                            mt: 0.25,
                            noWrap: true,
                            component: "span",
                            typography: "caption",
                            color: "text.disabled"
                        }
                    })
                ]
            }, attachment.name + index))
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            renderBtn,
            /*#__PURE__*/ jsx_runtime_.jsx(Box["default"], {
                sx: {
                    overflow: "hidden",
                    height: collapse.value ? 1 : 0,
                    transition: (theme)=>theme.transitions.create([
                            "height"
                        ], {
                            duration: theme.transitions.duration.shorter
                        })
                },
                children: renderContent
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/sections/chat/chat-room.tsx




// @mui





// hooks

// components

//




// ----------------------------------------------------------------------
const chat_room_NAV_WIDTH = 240;
function ChatRoom({ participants, conversation }) {
    const theme = (0,styles.useTheme)();
    const lgUp = (0,use_responsive/* useResponsive */.F)("up", "lg");
    const { collapseDesktop, onCloseDesktop, onCollapseDesktop, //
    openMobile, onOpenMobile, onCloseMobile } = useCollapseNav();
    (0,react_.useEffect)(()=>{
        if (!lgUp) {
            onCloseDesktop();
        }
    }, [
        onCloseDesktop,
        lgUp
    ]);
    const handleToggleNav = (0,react_.useCallback)(()=>{
        if (lgUp) {
            onCollapseDesktop();
        } else {
            onOpenMobile();
        }
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [
        lgUp
    ]);
    const group = participants.length > 1;
    const attachments = uniq_default()(flatten_default()(conversation.messages.map((messages)=>messages.attachments)));
    const renderContent = /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            group ? /*#__PURE__*/ jsx_runtime_.jsx(ChatRoomGroup, {
                participants: participants
            }) : /*#__PURE__*/ jsx_runtime_.jsx(ChatRoomSingle, {
                participant: participants[0]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(ChatRoomAttachments, {
                attachments: attachments
            })
        ]
    });
    const renderToggleBtn = /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
        onClick: handleToggleNav,
        sx: {
            top: 12,
            right: 0,
            zIndex: 9,
            width: 32,
            height: 32,
            borderRight: 0,
            position: "absolute",
            borderRadius: `12px 0 0 12px`,
            boxShadow: theme.customShadows.z8,
            bgcolor: theme.palette.background.paper,
            border: `solid 1px ${theme.palette.divider}`,
            "&:hover": {
                bgcolor: theme.palette.background.neutral
            },
            ...lgUp && {
                ...!collapseDesktop && {
                    right: chat_room_NAV_WIDTH
                }
            }
        },
        children: lgUp ? /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
            width: 16,
            icon: collapseDesktop ? "eva:arrow-ios-back-fill" : "eva:arrow-ios-forward-fill"
        }) : /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
            width: 16,
            icon: "eva:arrow-ios-back-fill"
        })
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Box["default"], {
        sx: {
            position: "relative"
        },
        children: [
            renderToggleBtn,
            lgUp ? /*#__PURE__*/ jsx_runtime_.jsx(Stack["default"], {
                sx: {
                    height: 1,
                    flexShrink: 0,
                    width: chat_room_NAV_WIDTH,
                    borderLeft: `solid 1px ${theme.palette.divider}`,
                    transition: theme.transitions.create([
                        "width"
                    ], {
                        duration: theme.transitions.duration.shorter
                    }),
                    ...collapseDesktop && {
                        width: 0
                    }
                },
                children: !collapseDesktop && renderContent
            }) : /*#__PURE__*/ jsx_runtime_.jsx((Drawer_default()), {
                anchor: "right",
                open: openMobile,
                onClose: onCloseMobile,
                slotProps: {
                    backdrop: {
                        invisible: true
                    }
                },
                PaperProps: {
                    sx: {
                        width: chat_room_NAV_WIDTH
                    }
                },
                children: renderContent
            })
        ]
    });
}

// EXTERNAL MODULE: ./src/components/lightbox/index.ts + 3 modules
var components_lightbox = __webpack_require__(9216);
;// CONCATENATED MODULE: ./src/sections/chat/chat-message-item.tsx


// @mui





// hooks

// components

//

function ChatMessageItem({ message, participants, onOpenLightbox }) {
    const { user } = (0,use_mocked_user/* useMockedUser */.I)();
    const { me, senderDetails, hasImage } = useGetMessage({
        message,
        participants,
        currentUserId: user.id
    });
    const { firstName, avatarUrl } = senderDetails;
    const { body, createdAt } = message;
    const renderInfo = /*#__PURE__*/ (0,jsx_runtime_.jsxs)((Typography_default()), {
        noWrap: true,
        variant: "caption",
        sx: {
            mb: 1,
            color: "text.disabled",
            ...!me && {
                mr: "auto"
            }
        },
        children: [
            !me && `${firstName},`,
            " \xa0",
            (0,formatDistanceToNowStrict/* default */.Z)(new Date(createdAt), {
                addSuffix: true
            })
        ]
    });
    const renderBody = /*#__PURE__*/ jsx_runtime_.jsx(Stack["default"], {
        sx: {
            p: 1.5,
            minWidth: 48,
            maxWidth: 320,
            borderRadius: 1,
            typography: "body2",
            bgcolor: "background.neutral",
            ...me && {
                color: "grey.800",
                bgcolor: "primary.lighter"
            },
            ...hasImage && {
                p: 0,
                bgcolor: "transparent"
            }
        },
        children: hasImage ? /*#__PURE__*/ jsx_runtime_.jsx(Box["default"], {
            component: "img",
            alt: "attachment",
            src: body,
            onClick: ()=>onOpenLightbox(body),
            sx: {
                minHeight: 220,
                borderRadius: 1.5,
                cursor: "pointer",
                "&:hover": {
                    opacity: 0.9
                }
            }
        }) : body
    });
    const renderActions = /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
        direction: "row",
        className: "message-actions",
        sx: {
            pt: 0.5,
            opacity: 0,
            top: "100%",
            left: 0,
            position: "absolute",
            transition: (theme)=>theme.transitions.create([
                    "opacity"
                ], {
                    duration: theme.transitions.duration.shorter
                }),
            ...me && {
                left: "unset",
                right: 0
            }
        },
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                size: "small",
                children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                    icon: "solar:reply-bold",
                    width: 16
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                size: "small",
                children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                    icon: "eva:smiling-face-fill",
                    width: 16
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                size: "small",
                children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                    icon: "solar:trash-bin-trash-bold",
                    width: 16
                })
            })
        ]
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
        direction: "row",
        justifyContent: me ? "flex-end" : "unset",
        sx: {
            mb: 5
        },
        children: [
            !me && /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                alt: firstName,
                src: avatarUrl,
                sx: {
                    width: 32,
                    height: 32,
                    mr: 2
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                alignItems: "flex-end",
                children: [
                    renderInfo,
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                        direction: "row",
                        alignItems: "center",
                        sx: {
                            position: "relative",
                            "&:hover": {
                                "& .message-actions": {
                                    opacity: 1
                                }
                            }
                        },
                        children: [
                            renderBody,
                            renderActions
                        ]
                    })
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/sections/chat/chat-message-list.tsx
// @mui


// components


//


function ChatMessageList({ messages = [], participants }) {
    const { messagesEndRef } = useMessagesScroll(messages);
    const slides = messages.filter((message)=>message.contentType === "image").map((message)=>({
            src: message.body
        }));
    const lightbox = (0,components_lightbox/* useLightBox */.NX)(slides);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(scrollbar/* default */.Z, {
                ref: messagesEndRef,
                sx: {
                    px: 3,
                    py: 5,
                    height: 1
                },
                children: /*#__PURE__*/ jsx_runtime_.jsx(Box["default"], {
                    children: messages.map((message)=>/*#__PURE__*/ jsx_runtime_.jsx(ChatMessageItem, {
                            message: message,
                            participants: participants,
                            onOpenLightbox: ()=>lightbox.onOpen(message.body)
                        }, message.id))
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(components_lightbox/* default */.ZP, {
                index: lightbox.selected,
                slides: slides,
                open: lightbox.open,
                close: lightbox.onClose
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/date-fns/esm/sub/index.js + 1 modules
var sub = __webpack_require__(93523);
// EXTERNAL MODULE: ./src/utils/uuidv4.ts
var uuidv4 = __webpack_require__(84419);
;// CONCATENATED MODULE: ./src/sections/chat/chat-message-input.tsx



// @mui



// routes


// hooks

// utils

// api

// components

function ChatMessageInput({ recipients, onAddRecipients, //
disabled, selectedConversationId }) {
    const router = (0,hooks/* useRouter */.tv)();
    const { user } = (0,use_mocked_user/* useMockedUser */.I)();
    const fileRef = (0,react_.useRef)(null);
    const [message, setMessage] = (0,react_.useState)("");
    const myContact = (0,react_.useMemo)(()=>({
            id: user.id,
            role: user.role,
            email: user.email,
            address: user.address,
            name: user.displayName,
            lastActivity: new Date(),
            avatarUrl: user.photoURL,
            phoneNumber: user.phoneNumber,
            status: "online"
        }), [
        user
    ]);
    const messageData = (0,react_.useMemo)(()=>({
            id: (0,uuidv4/* default */.Z)(),
            attachments: [],
            body: message,
            contentType: "text",
            createdAt: (0,sub/* default */.Z)(new Date(), {
                minutes: 1
            }),
            senderId: myContact.id
        }), [
        message,
        myContact.id
    ]);
    const conversationData = (0,react_.useMemo)(()=>({
            id: (0,uuidv4/* default */.Z)(),
            messages: [
                messageData
            ],
            participants: [
                ...recipients,
                myContact
            ],
            type: recipients.length > 1 ? "GROUP" : "ONE_TO_ONE",
            unreadCount: 0
        }), [
        messageData,
        myContact,
        recipients
    ]);
    const handleAttach = (0,react_.useCallback)(()=>{
        if (fileRef.current) {
            fileRef.current.click();
        }
    }, []);
    const handleChangeMessage = (0,react_.useCallback)((event)=>{
        setMessage(event.target.value);
    }, []);
    const handleSendMessage = (0,react_.useCallback)(async (event)=>{
        try {
            if (event.key === "Enter") {
                if (message) {
                    if (selectedConversationId) {
                        await sendMessage(selectedConversationId, messageData);
                    } else {
                        const res = await createConversation(conversationData);
                        router.push(`${paths/* paths */.H.dashboard.chat}?id=${res.conversation.id}`);
                        onAddRecipients([]);
                    }
                }
                setMessage("");
            }
        } catch (error) {
            console.error(error);
        }
    }, [
        conversationData,
        message,
        messageData,
        onAddRecipients,
        router,
        selectedConversationId
    ]);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((InputBase_default()), {
                value: message,
                onKeyUp: handleSendMessage,
                onChange: handleChangeMessage,
                placeholder: "Type a message",
                disabled: disabled,
                startAdornment: /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                    children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                        icon: "eva:smiling-face-fill"
                    })
                }),
                endAdornment: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                    direction: "row",
                    sx: {
                        flexShrink: 0
                    },
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                            onClick: handleAttach,
                            children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                icon: "solar:gallery-add-bold"
                            })
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                            onClick: handleAttach,
                            children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                icon: "eva:attach-2-fill"
                            })
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                            children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                icon: "solar:microphone-bold"
                            })
                        })
                    ]
                }),
                sx: {
                    px: 1,
                    height: 56,
                    flexShrink: 0,
                    borderTop: (theme)=>`solid 1px ${theme.palette.divider}`
                }
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("input", {
                type: "file",
                ref: fileRef,
                style: {
                    display: "none"
                }
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/sections/chat/chat-header-detail.tsx
// @mui







// utils

// components

function ChatHeaderDetail({ participants }) {
    const group = participants.length > 1;
    const singleParticipant = participants[0];
    const renderGroup = /*#__PURE__*/ jsx_runtime_.jsx((AvatarGroup_default()), {
        max: 3,
        sx: {
            [`& .${AvatarGroup.avatarGroupClasses.avatar}`]: {
                width: 32,
                height: 32
            }
        },
        children: participants.map((participant)=>/*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                alt: participant.name,
                src: participant.avatarUrl
            }, participant.id))
    });
    const renderSingle = /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
        flexGrow: 1,
        direction: "row",
        alignItems: "center",
        spacing: 2,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((Badge_default()), {
                variant: singleParticipant.status,
                anchorOrigin: {
                    vertical: "bottom",
                    horizontal: "right"
                },
                children: /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                    src: singleParticipant.avatarUrl,
                    alt: singleParticipant.name
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((ListItemText_default()), {
                primary: singleParticipant.name,
                secondary: singleParticipant.status === "offline" ? (0,format_time/* fToNow */.DY)(singleParticipant.lastActivity) : singleParticipant.status,
                secondaryTypographyProps: {
                    component: "span",
                    ...singleParticipant.status !== "offline" && {
                        textTransform: "capitalize"
                    }
                }
            })
        ]
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            group ? renderGroup : renderSingle,
            /*#__PURE__*/ jsx_runtime_.jsx(Stack["default"], {
                flexGrow: 1
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                    icon: "solar:phone-bold"
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                    icon: "solar:videocamera-record-bold"
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((IconButton_default()), {
                children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                    icon: "eva:more-vertical-fill"
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/@mui/material/node/Chip/index.js
var Chip = __webpack_require__(92133);
var Chip_default = /*#__PURE__*/__webpack_require__.n(Chip);
// EXTERNAL MODULE: ./node_modules/@mui/material/node/Autocomplete/index.js
var Autocomplete = __webpack_require__(45003);
var Autocomplete_default = /*#__PURE__*/__webpack_require__.n(Autocomplete);
;// CONCATENATED MODULE: ./src/sections/chat/chat-header-compose.tsx



// @mui








// components


function ChatHeaderCompose({ contacts, onAddRecipients }) {
    const [searchRecipients, setSearchRecipients] = (0,react_.useState)("");
    const handleAddRecipients = (0,react_.useCallback)((selected)=>{
        setSearchRecipients("");
        onAddRecipients(selected);
    }, [
        onAddRecipients
    ]);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                variant: "subtitle2",
                sx: {
                    color: "text.primary",
                    mr: 2
                },
                children: "To:"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx((Autocomplete_default()), {
                sx: {
                    minWidth: 320
                },
                multiple: true,
                limitTags: 3,
                popupIcon: null,
                disableCloseOnSelect: true,
                noOptionsText: /*#__PURE__*/ jsx_runtime_.jsx(search_not_found/* default */.Z, {
                    query: searchRecipients
                }),
                onChange: (event, newValue)=>handleAddRecipients(newValue),
                onInputChange: (event, newValue)=>setSearchRecipients(newValue),
                options: contacts,
                getOptionLabel: (recipient)=>recipient.name,
                isOptionEqualToValue: (option, value)=>option.id === value.id,
                renderInput: (params)=>/*#__PURE__*/ jsx_runtime_.jsx((TextField_default()), {
                        ...params,
                        placeholder: "+ Recipients"
                    }),
                renderOption: (props, recipient, { selected })=>/*#__PURE__*/ (0,react_.createElement)("li", {
                        ...props,
                        key: recipient.id,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Box["default"], {
                                sx: {
                                    mr: 1,
                                    width: 32,
                                    height: 32,
                                    overflow: "hidden",
                                    borderRadius: "50%",
                                    position: "relative"
                                },
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                                        alt: recipient.name,
                                        src: recipient.avatarUrl,
                                        sx: {
                                            width: 1,
                                            height: 1
                                        }
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(Stack["default"], {
                                        alignItems: "center",
                                        justifyContent: "center",
                                        sx: {
                                            top: 0,
                                            left: 0,
                                            width: 1,
                                            height: 1,
                                            opacity: 0,
                                            position: "absolute",
                                            bgcolor: (theme)=>(0,styles.alpha)(theme.palette.grey[900], 0.8),
                                            transition: (theme)=>theme.transitions.create([
                                                    "opacity"
                                                ], {
                                                    easing: theme.transitions.easing.easeInOut,
                                                    duration: theme.transitions.duration.shorter
                                                }),
                                            ...selected && {
                                                opacity: 1,
                                                color: "primary.main"
                                            }
                                        },
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(iconify/* default */.Z, {
                                            icon: "eva:checkmark-fill"
                                        })
                                    })
                                ]
                            }, recipient.id),
                            recipient.name
                        ]
                    }),
                renderTags: (selected, getTagProps)=>selected.map((recipient, index)=>/*#__PURE__*/ (0,react_.createElement)((Chip_default()), {
                            ...getTagProps({
                                index
                            }),
                            key: recipient.id,
                            label: recipient.name,
                            avatar: /*#__PURE__*/ jsx_runtime_.jsx((Avatar_default()), {
                                alt: recipient.name,
                                src: recipient.avatarUrl
                            }),
                            size: "small",
                            variant: "soft"
                        }))
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/sections/chat/view/chat-view.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 

// @mui




// routes


// hooks

// api

// components

//






// ----------------------------------------------------------------------
function ChatView() {
    const router = (0,hooks/* useRouter */.tv)();
    const { user } = (0,use_mocked_user/* useMockedUser */.I)();
    const settings = (0,components_settings/* useSettingsContext */.K$)();
    const searchParams = (0,hooks/* useSearchParams */.lr)();
    const selectedConversationId = searchParams.get("id") || "";
    const [recipients, setRecipients] = (0,react_.useState)([]);
    const { contacts } = useGetContacts();
    const { conversations, conversationsLoading } = useGetConversations();
    const { conversation, conversationError } = useGetConversation(`${selectedConversationId}`);
    const participants = conversation ? conversation.participants.filter((participant)=>participant.id !== user.id) : [];
    (0,react_.useEffect)(()=>{
        if (conversationError || !selectedConversationId) {
            router.push(paths/* paths */.H.dashboard.chat);
        }
    }, [
        conversationError,
        router,
        selectedConversationId
    ]);
    const handleAddRecipients = (0,react_.useCallback)((selected)=>{
        setRecipients(selected);
    }, []);
    const details = !!conversation;
    const renderHead = /*#__PURE__*/ jsx_runtime_.jsx(Stack["default"], {
        direction: "row",
        alignItems: "center",
        flexShrink: 0,
        sx: {
            pr: 1,
            pl: 2.5,
            py: 1,
            minHeight: 72
        },
        children: selectedConversationId ? /*#__PURE__*/ jsx_runtime_.jsx(jsx_runtime_.Fragment, {
            children: details && /*#__PURE__*/ jsx_runtime_.jsx(ChatHeaderDetail, {
                participants: participants
            })
        }) : /*#__PURE__*/ jsx_runtime_.jsx(ChatHeaderCompose, {
            contacts: contacts,
            onAddRecipients: handleAddRecipients
        })
    });
    const renderNav = /*#__PURE__*/ jsx_runtime_.jsx(ChatNav, {
        contacts: contacts,
        conversations: conversations,
        loading: conversationsLoading,
        selectedConversationId: selectedConversationId
    });
    const renderMessages = /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
        sx: {
            width: 1,
            height: 1,
            overflow: "hidden"
        },
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx(ChatMessageList, {
                messages: conversation?.messages,
                participants: participants
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(ChatMessageInput, {
                recipients: recipients,
                onAddRecipients: handleAddRecipients,
                //
                selectedConversationId: selectedConversationId,
                disabled: !recipients.length && !selectedConversationId
            })
        ]
    });
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)((Container_default()), {
        maxWidth: settings.themeStretch ? false : "xl",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx((Typography_default()), {
                variant: "h4",
                sx: {
                    mb: {
                        xs: 3,
                        md: 5
                    }
                },
                children: "Chat"
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                component: (Card_default()),
                direction: "row",
                sx: {
                    height: "72vh"
                },
                children: [
                    renderNav,
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                        sx: {
                            width: 1,
                            height: 1,
                            overflow: "hidden"
                        },
                        children: [
                            renderHead,
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Stack["default"], {
                                direction: "row",
                                sx: {
                                    width: 1,
                                    height: 1,
                                    overflow: "hidden",
                                    borderTop: (theme)=>`solid 1px ${theme.palette.divider}`
                                },
                                children: [
                                    renderMessages,
                                    details && /*#__PURE__*/ jsx_runtime_.jsx(ChatRoom, {
                                        conversation: conversation,
                                        participants: participants
                                    })
                                ]
                            })
                        ]
                    })
                ]
            })
        ]
    });
}


/***/ }),

/***/ 84419:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ uuidv4)
/* harmony export */ });
/* eslint-disable */ // ----------------------------------------------------------------------
function uuidv4() {
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
        const r = Math.random() * 16 | 0, v = c === "x" ? r : r & 0x3 | 0x8;
        return v.toString(16);
    });
}


/***/ }),

/***/ 11235:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ ChatPage),
  metadata: () => (/* binding */ metadata)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(56786);
// EXTERNAL MODULE: ./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js
var module_proxy = __webpack_require__(61363);
;// CONCATENATED MODULE: ./src/sections/chat/view/chat-view.tsx

const proxy = (0,module_proxy.createProxy)(String.raw`/Users/xperia/Workspace/budgeting_fe-main/src/sections/chat/view/chat-view.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const chat_view = (__default__);
;// CONCATENATED MODULE: ./src/sections/chat/view/index.ts


;// CONCATENATED MODULE: ./src/app/dashboard/chat/page.tsx
// sections


// ----------------------------------------------------------------------
const metadata = {
    title: "Dashboard: Chat"
};
function ChatPage() {
    return /*#__PURE__*/ jsx_runtime_.jsx(chat_view, {});
}


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8071,8111,2870,413,6267,6856,6186,6209,6801,9882,7146,8889,6341,2598,9428,9215,5612,3471,9216], () => (__webpack_exec__(496)));
module.exports = __webpack_exports__;

})();